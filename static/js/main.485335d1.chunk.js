(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{14:function(e,t,n){e.exports=n(24)},20:function(e,t,n){},23:function(e,t,n){},24:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),i=n(7),l=n.n(i),o=(n(20),n(5)),c=n(2),u=n(4),s=n(8),d=n(9),h=n(12),m=n(10),b=n(13),g=function(e){var t=e.onFilterInput;return r.a.createElement("div",{className:"header__input"},r.a.createElement("input",{type:"text",onChange:t,placeholder:"search..."}))},f=n(3),p=n.n(f),k=function(e){var t=e.handleSelectedButtonClick,n=e.showSelectedButtonIsActive;return r.a.createElement("div",{className:"header__buttons"},r.a.createElement("button",{className:p()("button",{"button-active":!1===n}),onClick:function(){return t(!1)}},"Show all"),r.a.createElement("button",{className:p()("button",{"button-active":!0===n}),onClick:function(){return t(!0)}},"Show selected"))},v=function(e){var t=e.onFilterInput,n=e.handleSelectedButtonClick,a=e.showSelectedButtonIsActive;return r.a.createElement("header",{className:"header"},r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"header__content"},r.a.createElement("div",{className:"header__logo"},"phones.ua"),r.a.createElement(g,{onFilterInput:t}),r.a.createElement(k,{handleSelectedButtonClick:n,showSelectedButtonIsActive:a}))))},E=n(11),C=n(1),S=n.n(C),y=r.a.createContext(),P=function(e){var t=e.handlePaginationSelector,n=e.perPage;return r.a.createElement("div",{className:"pagination__selector"},r.a.createElement("select",{onChange:t,value:n},r.a.createElement("option",{value:"3"},"3"),r.a.createElement("option",{value:"5"},"5"),r.a.createElement("option",{value:"10"},"10"),r.a.createElement("option",{value:"15"},"15"),r.a.createElement("option",{value:"20"},"20")))},O=function(e,t){return function(n){return r.a.createElement(e.Consumer,null,function(e){return r.a.createElement(t,Object.assign({},n,e))})}}.bind(null,y),B=function(){return r.a.createElement("main",{className:"main"},r.a.createElement("div",{className:"container"},r.a.createElement("table",{className:"main__table"},r.a.createElement(_,null),r.a.createElement(j,null))))},w=O(P);(B.Header=function(e){var t=e.handleCheckAll,n=e.checkedAll,a=e.config,i=e.handleOrderClick;return r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,r.a.createElement("input",{type:"checkbox",onChange:t,checked:n}),r.a.createElement(w,null)),Object.entries(a).map(function(e){var t=Object(E.a)(e,2),n=t[0],a=t[1],l=p()({"main__table-sortable":a.isSortable});return r.a.createElement("th",{key:n,className:l,onClick:a.isSortable?function(){return i(n)}:null},a.title)})))}).propTypes={handleCheckAll:S.a.func.isRequired,checkedAll:S.a.bool.isRequired,handleOrderClick:S.a.func.isRequired,config:S.a.objectOf(S.a.shape({title:S.a.string,isSortable:S.a.bool,isSearchable:S.a.bool,hasImage:S.a.bool,isEditable:S.a.bool})).isRequired},(B.Content=function(e){var t=e.phones,n=e.togglePhoneCheckbox,a=e.config;return r.a.createElement("tbody",null,t.map(function(e){return r.a.createElement("tr",{key:e.id},r.a.createElement("th",null,r.a.createElement("input",{type:"checkbox",checked:e.isChecked,onChange:function(){return n(e.id)}})),Object.keys(a).map(function(t){var n=r.a.createElement(N,{title:t,phone:e});return r.a.createElement(I,{key:t,title:t,phone:e,editableBlock:n})}))}))}).propTypes={phones:S.a.array,togglePhoneCheckbox:S.a.func.isRequired,config:S.a.objectOf(S.a.shape({title:S.a.string,isSortable:S.a.bool,isSearchable:S.a.bool,hasImage:S.a.bool,isEditable:S.a.bool}))},(B.EditableBlock=function(e){var t=e.handleEditableBlockBlur,n=e.handleSubmitEditing,a=e.phone,i=e.title,l=a[i],o=!1;return r.a.createElement("div",null,r.a.createElement("textarea",{autoFocus:!0,defaultValue:l,onChange:function(e){l=e.target.value,o=!0},onBlur:function(){return t(a.id)},onKeyDown:function(e){return 13===e.keyCode?n(a.id,i,l,o):null},className:"editable-block__text"}),r.a.createElement("button",{className:"editable-block__button button",onMouseDown:function(){return n(a.id,i,l,o)}},"OK"))}).propTypes={handleEditableBlockBlur:S.a.func.isRequired,handleSubmitEditing:S.a.func.isRequired,title:S.a.string,phone:S.a.shape({age:S.a.number,editableField:S.a.string,id:S.a.string,imageUrl:S.a.string,isChecked:S.a.bool,name:S.a.string,snippet:S.a.string}).isRequired},(B.Cell=function(e){var t=e.config,n=e.handleDoubleClick,a=e.title,i=e.phone,l=e.editableBlock,o=p()({"editable-block":t[a].isEditable}),c=r.a.createElement("img",{src:"".concat("https://raw.githubusercontent.com/TarSen99/DataTableComponent/master/").concat(i[a]),alt:a});return r.a.createElement("td",{key:a,onDoubleClick:t[a].isEditable?function(){return n(i.id,a)}:null,className:o},i.editableField===a&&l||(t[a].hasImage?c:i[a]))}).propTypes={handleDoubleClick:S.a.func.isRequired,handleSubmitEditing:S.a.func.isRequired,title:S.a.string,editableBlock:S.a.element,config:S.a.objectOf(S.a.shape({title:S.a.string,isSortable:S.a.bool,isSearchable:S.a.bool,hasImage:S.a.bool,isEditable:S.a.bool})).isRequired,phone:S.a.shape({age:S.a.number,editableField:S.a.string,id:S.a.string,imageUrl:S.a.string,isChecked:S.a.bool,name:S.a.string,snippet:S.a.string}).isRequired};var _=O(B.Header),j=O(B.Content),N=O(B.EditableBlock),I=O(B.Cell),x=B,F=function(e){var t=e.totalPhonesCount,n=e.currentPage,a=e.perPage,i=e.handleClick,l=function(e,t){var a=n+e;a=Math.max(0,a),(a=Math.min(t-1,a))!==n&&i(a)},o=Math.ceil(t/a),c=function(e){for(var t=[],n=0;n<e;n++)t.push(n);return t}(o),u=Math.min(n*a+1,t),s=Math.min(n*a+a,t);return r.a.createElement("div",{className:"pagination"},r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"pagination__block"},r.a.createElement("div",{className:"pagination__text"},r.a.createElement("span",{className:"pagination__current-items"},"".concat(u," - ").concat(s," ")),"of",r.a.createElement("span",{className:"pagination__total-items"}," ".concat(t))),r.a.createElement("div",{className:"pagination__buttons"},r.a.createElement("button",{onClick:function(){return l(-1,o)},className:"pagination__arrow button",disabled:0===n},"<"),c.map(function(e){var t=p()("button",{"button-active":e===n});return r.a.createElement("button",{key:e,onClick:function(){return i(e)},className:t},e+1)}),r.a.createElement("button",{onClick:function(){return l(1,o)},className:"pagination__arrow button",disabled:n===Math.max(o-1,0)},">")))))},A={imageUrl:{hasImage:!0},name:{title:"Name",isSortable:!0,isSearchable:!0},snippet:{title:"Description",isSearchable:!0,isEditable:!0},age:{title:"Age",isSortable:!0}},D=(n(23),function(e){function t(){var e,n;Object(s.a)(this,t);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(n=Object(h.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).state={phones:[],order:"DESC",orderBy:"",filterValue:"",currentPage:0,perPage:3,showSelected:!1,isLoading:!0},n.togglePhoneCheckbox=function(e){var t=Object(u.a)(n.state.phones),a=t.findIndex(function(t){return t.id===e});t[a]=Object(c.a)({},t[a],{isChecked:!t[a].isChecked}),n.setState({phones:t})},n.onOrderInput=function(e){var t=n.state.orderBy===e?n.getNewOrder():n.state.order;n.setState({order:t,orderBy:e})},n.onFilterInput=function(e){var t=e.target.value;n.setState({currentPage:0,filterValue:t})},n.selectPage=function(e){n.setState({currentPage:e})},n.handlePaginationSelector=function(e){var t=+e.target.value;n.setState({currentPage:0,perPage:t})},n.handleSelectedButtonClick=function(e){n.setState({currentPage:0,showSelected:e})},n.handleCheckAll=function(e){var t=e.target.checked,a=n.getFilteredPhones(),r=Object(u.a)(n.getCurrentPagePhones(a)).map(function(e){return Object(c.a)({},e,{isChecked:t})});n.setState(function(e){var t=Object(u.a)(e.phones);return r.forEach(function(e){var n=e.id,a=e.isChecked,r=t.findIndex(function(e){return e.id===n});t[r]=Object(c.a)({},t[r],{isChecked:a})}),{phones:t}})},n.handleDoubleClick=function(e,t){n.setState(function(n){var a=Object(u.a)(n.phones),r=a.findIndex(function(t){return t.id===e});return a[r]=Object(c.a)({},a[r],{editableField:t}),{phones:a}})},n.handleSubmitEditing=function(e,t,a,r){n.setState(function(n){var i,l=Object(u.a)(n.phones),s=l.findIndex(function(t){return t.id===e});return l[s]=Object(c.a)({},l[s],(i={},Object(o.a)(i,t,r?a:l[s][t]),Object(o.a)(i,"editableField",null),i)),{phones:l}})},n.handleEditableBlockBlur=function(e){n.setState(function(t){var n=Object(u.a)(t.phones),a=n.findIndex(function(t){return t.id===e});return n[a]=Object(c.a)({},n[a],{editableField:null}),{phones:n}})},n}return Object(b.a)(t,e),Object(d.a)(t,[{key:"componentDidMount",value:function(){var e=this;fetch("https://mate-academy.github.io/phone-catalogue-static/phones/phones.json").then(function(e){return e.json()}).then(function(t){var n=e.addIsCheckedProperty(t),a=e.addCurrentEditableField(n);e.setState({phones:a,isLoading:!1})})}},{key:"addIsCheckedProperty",value:function(e){return e.map(function(e){return Object(c.a)({},e,{isChecked:!1})})}},{key:"addCurrentEditableField",value:function(e){return e.map(function(e){return Object(c.a)({},e,{editableField:null})})}},{key:"getNewOrder",value:function(){return"ASC"===this.state.order?"DESC":"ASC"}},{key:"sortItems",value:function(e,t,n){return e.sort(function(e,a){return"ASC"===n?e[t]>a[t]?1:-1:e[t]>a[t]?-1:1})}},{key:"getSearchableParams",value:function(e){var t=[];for(var n in e){if(!e.hasOwnProperty(n))return;A[n].isSearchable&&t.push(n)}return t}},{key:"getFilteredPhones",value:function(){var e=this.state,t=e.phones,n=e.filterValue,a=e.orderBy,r=e.order,i=n.toLowerCase(),l=this.getSearchableParams(A),o=t.filter(function(e){var t=!0,n=!1,a=void 0;try{for(var r,o=l[Symbol.iterator]();!(t=(r=o.next()).done);t=!0){if(e[r.value].toLowerCase().includes(i))return!0}}catch(c){n=!0,a=c}finally{try{t||null==o.return||o.return()}finally{if(n)throw a}}return!1}),c=this.filterBySelection(o);return this.sortItems(c,a,r)}},{key:"filterBySelection",value:function(e){var t=this;return!1===this.state.showSelected?e:e.filter(function(e){return e.isChecked===t.state.showSelected})}},{key:"getCurrentPagePhones",value:function(e){var t=this.state,n=t.currentPage,a=t.perPage;return e.filter(function(e,t){return t>=n*a&&t<n*a+a})}},{key:"checkAllButtonsSelection",value:function(e){return e.every(function(e){return!0===e.isChecked})}},{key:"getSettings",value:function(e,t){return{perPage:this.state.perPage,handlePaginationSelector:this.handlePaginationSelector,config:A,phones:e,togglePhoneCheckbox:this.togglePhoneCheckbox,handleOrderClick:this.onOrderInput,handleCheckAll:this.handleCheckAll,checkedAll:t,handleDoubleClick:this.handleDoubleClick,handleSubmitEditing:this.handleSubmitEditing,handleEditableBlockBlur:this.handleEditableBlockBlur}}},{key:"render",value:function(){var e=this.getFilteredPhones(),t=this.getCurrentPagePhones(e),n=this.checkAllButtonsSelection(t),a=this.getSettings(t,n);return r.a.createElement(y.Provider,{value:a},r.a.createElement(r.a.Fragment,null,r.a.createElement(v,{onFilterInput:this.onFilterInput,handleSelectedButtonClick:this.handleSelectedButtonClick,showSelectedButtonIsActive:this.state.showSelected}),this.state.isLoading?r.a.createElement("div",{className:"container"},"Loading..."):r.a.createElement(r.a.Fragment,null,r.a.createElement(x,null),r.a.createElement(F,{totalPhonesCount:e.length,currentPage:this.state.currentPage,perPage:this.state.perPage,handleClick:this.selectPage}))))}}]),t}(a.Component));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(r.a.createElement(D,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[14,1,2]]]);
//# sourceMappingURL=main.485335d1.chunk.js.map