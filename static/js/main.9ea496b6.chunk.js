(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{13:function(e,t,n){e.exports=n(21)},19:function(e,t,n){},20:function(e,t,n){},21:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),l=n(6),c=n.n(l),o=(n(19),n(4)),i=n(1),u=n(3),s=n(7),d=n(8),h=n(11),m=n(9),f=n(12),b=function(e){return r.a.createElement("div",{className:"header__input"},r.a.createElement("input",{type:"text",onChange:e.onFilterInput,placeholder:"search..."}))},g=n(2),p=n.n(g),v=function(e){var t=e.handleSelectedButtonClick,n=e.showSelectedButtonIsActive;return r.a.createElement("div",{className:"header__buttons"},r.a.createElement("button",{className:p()("button",{"button-active":!1===n}),onClick:function(){return t(!1)}},"Show all"),r.a.createElement("button",{className:p()("button",{"button-active":!0===n}),onClick:function(){return t(!0)}},"Show selected"))},k=function(e){var t=e.onFilterInput,n=e.handleSelectedButtonClick,a=e.showSelectedButtonIsActive;return r.a.createElement("header",{className:"header"},r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"header__content"},r.a.createElement("div",{className:"header__logo"},"phones.ua"),r.a.createElement(b,{onFilterInput:t}),r.a.createElement(v,{handleSelectedButtonClick:n,showSelectedButtonIsActive:a}))))},E=n(10),C=r.a.createContext(),S=function(){return r.a.createElement(C.Consumer,null,function(e){var t=e.handlePaginationSelector,n=e.perPage;return r.a.createElement("div",{className:"pagination__selector"},r.a.createElement("select",{onChange:t,value:n},r.a.createElement("option",{value:"3"},"3"),r.a.createElement("option",{value:"5"},"5"),r.a.createElement("option",{value:"10"},"10"),r.a.createElement("option",{value:"15"},"15"),r.a.createElement("option",{value:"20"},"20")))})},P=function e(){return r.a.createElement("main",{className:"main"},r.a.createElement("div",{className:"container"},r.a.createElement("table",{className:"main__table"},r.a.createElement(e.Header,null),r.a.createElement(e.Content,null))))};P.Header=function(){return r.a.createElement(C.Consumer,null,function(e){var t=e.handleCheckAll,n=e.checkedAll,a=e.config,l=e.handleOrderClick;return r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,r.a.createElement("input",{type:"checkbox",onChange:t,checked:n}),r.a.createElement(S,null)),Object.entries(a).map(function(e){var t=Object(E.a)(e,2),n=t[0],a=t[1],c=p()({"main__table-sortable":a.isSortable});return r.a.createElement("th",{key:n,className:c,onClick:a.isSortable?function(){return l(n)}:null},a.title)})))})},P.Content=function(){return r.a.createElement(C.Consumer,null,function(e){var t=e.phones,n=e.togglePhoneCheckbox,a=e.config;return r.a.createElement("tbody",null,t.map(function(e){return r.a.createElement("tr",{key:e.id},r.a.createElement("th",null,r.a.createElement("input",{type:"checkbox",checked:e.isChecked,onChange:function(){return n(e.id)}})),Object.keys(a).map(function(t){var n=r.a.createElement(P.EditableBlock,{title:t,phone:e});return r.a.createElement(P.Cell,{key:t,title:t,phone:e,editableBlock:n})}))}))})},P.EditableBlock=function(e){var t=e.phone,n=e.title,a=t[n],l=!1,c=function(e){a=e.target.value,l=!0};return r.a.createElement(C.Consumer,null,function(e){var o=e.handleEditableBlockBlur,i=e.handleSubmitEditing;return r.a.createElement("div",null,r.a.createElement("textarea",{autoFocus:!0,defaultValue:a,onChange:c,onBlur:function(){return o(t.id)},onKeyDown:function(e){return 13===e.keyCode?i(t.id,n,a,l):null},className:"editable-block__text"}),r.a.createElement("button",{className:"editable-block__button button",onMouseDown:function(){return i(t.id,n,a,l)}},"OK"))})},P.Cell=function(e){var t=e.title,n=e.phone,a=e.editableBlock;return r.a.createElement(C.Consumer,null,function(e){var l=e.config,c=e.handleDoubleClick,o=p()({"editable-block":l[t].isEditable}),i=r.a.createElement("img",{src:"".concat("https://raw.githubusercontent.com/TarSen99/DataTableComponent/master/").concat(n[t]),alt:t});return r.a.createElement("td",{key:t,onDoubleClick:l[t].isEditable?function(){return c(n.id,t)}:null,className:o},n.editableField===t&&a||(l[t].hasImage?i:n[t]))})};var y=P,w=function(e){var t=e.totalPhonesCount,n=e.currentPage,a=e.perPage,l=e.handleClick,c=function(e,t){var a=n+e;a=Math.max(0,a),(a=Math.min(t-1,a))!==n&&l(a)},o=Math.ceil(t/a),i=function(e){for(var t=[],n=0;n<e;n++)t.push(n);return t}(o),u=Math.min(n*a+1,t),s=Math.min(n*a+a,t);return r.a.createElement("div",{className:"pagination"},r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"pagination__block"},r.a.createElement("div",{className:"pagination__text"},r.a.createElement("span",{className:"pagination__current-items"},"".concat(u," - ").concat(s," ")),"of",r.a.createElement("span",{className:"pagination__total-items"}," ".concat(t))),r.a.createElement("div",{className:"pagination__buttons"},r.a.createElement("button",{onClick:function(){return c(-1,o)},className:"pagination__arrow button",disabled:0===n},"<"),i.map(function(e){var t=p()("button",{"button-active":e===n});return r.a.createElement("button",{key:e,onClick:function(){return l(e)},className:t},e+1)}),r.a.createElement("button",{onClick:function(){return c(1,o)},className:"pagination__arrow button",disabled:n===Math.max(o-1,0)},">")))))},B={imageUrl:{hasImage:!0},name:{title:"Name",isSortable:!0,isSearchable:!0},snippet:{title:"Description",isSearchable:!0,isEditable:!0},age:{title:"Age",isSortable:!0}},O=(n(20),function(e){function t(){var e,n;Object(s.a)(this,t);for(var a=arguments.length,r=new Array(a),l=0;l<a;l++)r[l]=arguments[l];return(n=Object(h.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).state={phones:[],order:"DESC",orderBy:"",filterValue:"",currentPage:0,perPage:3,showSelected:!1},n.togglePhoneCheckbox=function(e){var t=Object(u.a)(n.state.phones),a=t.findIndex(function(t){return t.id===e});t[a]=Object(i.a)({},t[a],{isChecked:!t[a].isChecked}),n.setState({phones:t})},n.onOrderInput=function(e){var t=n.state.orderBy===e?n.getNewOrder():n.state.order;n.setState({order:t,orderBy:e})},n.onFilterInput=function(e){var t=e.target.value;n.setState({currentPage:0,filterValue:t})},n.selectPage=function(e){n.setState({currentPage:e})},n.handlePaginationSelector=function(e){var t=+e.target.value;n.setState({currentPage:0,perPage:t})},n.handleSelectedButtonClick=function(e){n.setState({currentPage:0,showSelected:e})},n.handleCheckAll=function(e){var t=e.target.checked,a=n.getFilteredPhones(),r=Object(u.a)(n.getCurrentPagePhones(a)).map(function(e){return Object(i.a)({},e,{isChecked:t})});n.setState(function(e){var t=Object(u.a)(e.phones);return r.forEach(function(e){var n=e.id,a=e.isChecked,r=t.findIndex(function(e){return e.id===n});t[r]=Object(i.a)({},t[r],{isChecked:a})}),{phones:t}})},n.handleDoubleClick=function(e,t){n.setState(function(n){var a=Object(u.a)(n.phones),r=a.findIndex(function(t){return t.id===e});return a[r]=Object(i.a)({},a[r],{editableField:t}),{phones:a}})},n.handleSubmitEditing=function(e,t,a,r){n.setState(function(n){var l,c=Object(u.a)(n.phones),s=c.findIndex(function(t){return t.id===e});return c[s]=Object(i.a)({},c[s],(l={},Object(o.a)(l,t,r?a:c[s][t]),Object(o.a)(l,"editableField",null),l)),{phones:c}})},n.handleEditableBlockBlur=function(e){n.setState(function(t){var n=Object(u.a)(t.phones),a=n.findIndex(function(t){return t.id===e});return n[a]=Object(i.a)({},n[a],{editableField:null}),{phones:n}})},n}return Object(f.a)(t,e),Object(d.a)(t,[{key:"componentDidMount",value:function(){var e=this;fetch("https://mate-academy.github.io/phone-catalogue-static/phones/phones.json").then(function(e){return e.json()}).then(function(t){var n=e.addIsCheckedProperty(t),a=e.addCurrentEditableField(n);e.setState({phones:a})})}},{key:"addIsCheckedProperty",value:function(e){return e.map(function(e){return Object(i.a)({},e,{isChecked:!1})})}},{key:"addCurrentEditableField",value:function(e){return e.map(function(e){return Object(i.a)({},e,{editableField:null})})}},{key:"getNewOrder",value:function(){return"ASC"===this.state.order?"DESC":"ASC"}},{key:"sortItems",value:function(e,t,n){return e.sort(function(e,a){return"ASC"===n?e[t]>a[t]?1:-1:e[t]>a[t]?-1:1})}},{key:"getSearchableParams",value:function(e){var t=[];for(var n in e){if(!e.hasOwnProperty(n))return;B[n].isSearchable&&t.push(n)}return t}},{key:"getFilteredPhones",value:function(){var e=this.state,t=e.phones,n=e.filterValue,a=e.orderBy,r=e.order,l=n.toLowerCase(),c=this.getSearchableParams(B),o=t.filter(function(e){var t=!0,n=!1,a=void 0;try{for(var r,o=c[Symbol.iterator]();!(t=(r=o.next()).done);t=!0){if(e[r.value].toLowerCase().includes(l))return!0}}catch(i){n=!0,a=i}finally{try{t||null==o.return||o.return()}finally{if(n)throw a}}return!1}),i=this.filterBySelection(o);return this.sortItems(i,a,r)}},{key:"filterBySelection",value:function(e){var t=this;return!1===this.state.showSelected?e:e.filter(function(e){return e.isChecked===t.state.showSelected})}},{key:"getCurrentPagePhones",value:function(e){var t=this.state,n=t.currentPage,a=t.perPage;return e.filter(function(e,t){return t>=n*a&&t<n*a+a})}},{key:"checkAllButtonsSelection",value:function(e){return e.every(function(e){return!0===e.isChecked})}},{key:"getSettings",value:function(e,t){return{perPage:this.state.perPage,handlePaginationSelector:this.handlePaginationSelector,config:B,phones:e,togglePhoneCheckbox:this.togglePhoneCheckbox,handleOrderClick:this.onOrderInput,handleCheckAll:this.handleCheckAll,checkedAll:t,handleDoubleClick:this.handleDoubleClick,handleSubmitEditing:this.handleSubmitEditing,handleEditableBlockBlur:this.handleEditableBlockBlur}}},{key:"render",value:function(){var e=this.getFilteredPhones(),t=this.getCurrentPagePhones(e),n=this.checkAllButtonsSelection(t),a=this.getSettings(t,n);return r.a.createElement(C.Provider,{value:a},r.a.createElement(r.a.Fragment,null,r.a.createElement(k,{onFilterInput:this.onFilterInput,handleSelectedButtonClick:this.handleSelectedButtonClick,showSelectedButtonIsActive:this.state.showSelected}),r.a.createElement(y,null),r.a.createElement(w,{totalPhonesCount:e.length,currentPage:this.state.currentPage,perPage:this.state.perPage,handleClick:this.selectPage})))}}]),t}(a.Component));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement(O,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[13,1,2]]]);
//# sourceMappingURL=main.9ea496b6.chunk.js.map